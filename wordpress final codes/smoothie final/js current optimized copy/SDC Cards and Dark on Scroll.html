<script type="text/javascript">
  // FUNCTIONS CALLED IN THE GSAP FUNCTIONS INIT FILE

  // ! MAKE THEME DARK ON SCROLL
  function dark_on_scroll() {
    gsap.registerPlugin(ScrollTrigger);

    const dark_sections = gsap.utils.toArray(".gsap-scroll-dark");
    if (!dark_sections.length) return;

    const dark_color = "#161616";
    const light_color = "#DEDEDE";

    dark_sections.forEach((dc) => {
      const target = ".elementor-kit-4250";

      // Scroll down: top center
      ScrollTrigger.create({
        trigger: dc,
        start: "top center",
        onEnter: () => {
          gsap.set(target, {
            "--e-global-color-785b64d": dark_color,
            "--e-global-color-d3ae19d": light_color,
            "--e-global-color-primary": light_color,
            "--e-global-color-secondary": light_color,
          });
        },
        onLeaveBack: () => {
          gsap.set(target, {
            "--e-global-color-785b64d": light_color,
            "--e-global-color-d3ae19d": dark_color,
            "--e-global-color-primary": dark_color,
            "--e-global-color-secondary": dark_color,
          });
        },
      });

      // Scroll down: bottom center
      ScrollTrigger.create({
        trigger: dc,
        start: "bottom center",
        onEnter: () => {
          gsap.set(target, {
            "--e-global-color-785b64d": light_color,
            "--e-global-color-d3ae19d": dark_color,
            "--e-global-color-primary": dark_color,
            "--e-global-color-secondary": dark_color,
          });
        },
        onLeaveBack: () => {
          gsap.set(target, {
            "--e-global-color-785b64d": dark_color,
            "--e-global-color-d3ae19d": light_color,
            "--e-global-color-primary": light_color,
            "--e-global-color-secondary": light_color,
          });
        },
      });
    });
  }

  // ! SCROLL DISPLAY CARDS
  function sdc_func() {
    const sdc_container = gsap.utils.toArray(".scroll_display_cards-container");

    if (sdc_container.length > 0) {
      sdc_container.forEach((sdc) => {
        const cards = sdc.querySelectorAll(".sdc-card");

        const p_max = 100;
        const p_min = 0;
        const start_points = [
          { x: p_max, y: p_max },
          { x: p_min, y: p_max },
          { x: -p_max, y: p_max },
        ];

        const tl = gsap.timeline({
          scrollTrigger: {
            trigger: sdc,
            start: "top bottom",
            end: "center center",
            scrub: 1,
          },
          defaults: {
            duration: 1,
            ease: "power2.out",
          },
        });

        if (cards.length > 0) {
          cards.forEach((card, i) => {
            const pos = start_points[i % start_points.length]; // safe cycling
            tl.from(
              card,
              {
                xPercent: pos.x,
                yPercent: pos.y,
                opacity: 0,
              },
              "<"
            );
          });
        }
      });
    }
  }
</script>
